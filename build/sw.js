var serviceWorkerOption = {"assets":["/static/js/main.ae3eef82.js","/static/css/main.133054fe.css","/index.html","/asset-manifest.json"]};
        
        !function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(6);r(o);console.log("111111111111111111111111111111111111111111")},function(t,e,n){t.exports=n(15)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"distance",value:function(t,e){function n(t){return u=t*t,a=t,a-(a*=u)/6+(a*=u)/120}function r(t){return u=t*t,a=u,1-u/2+(a*=u)/24}var o=6372795,i=.017453,a=1,u=1,s=t.lat*i,l=e.lat*i,c=t.lng*i,f=e.lng*i,h=r(s),d=r(l),p=n(s),v=n(l),m=f-c,g=r(m),y=n(m),w=d*g,b=Math.sqrt(d*d*y*y+(h*v-p*w)*(h*v-p*w)),x=p*v+h*w,S=Math.atan2(b,x),T=Math.ceil(S*o);return T}}]),t}();e.default=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){n(this,t)};r.apiPublicTransportServer="https://ptp-97126.app.xervo.io/",e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=r(a),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){var t=i(u.default.mark(function t(){var e,n,r,o,i,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=19;break}if(void 0!==localStorage.allStationsJSON&&null!=localStorage.allStationsJSON){t.next=16;break}return console.log("Downloading stations from server..."),e=v+"stations/",t.next=6,fetch(e);case 6:return n=t.sent,t.next=9,n.text();case 9:T=t.sent,m=JSON.parse(T),void 0!==m&&null!=m&&(localStorage.allStationsJSON=T),b=!0,console.log("Stations loaded from server."),t.next=19;break;case 16:m=JSON.parse(localStorage.allStationsJSON),b=!0,console.log("Stations loaded from localStorage.");case 19:if(x){t.next=38;break}if(void 0!==localStorage.allRoutesJSON&&null!=localStorage.allRoutesJSON){t.next=35;break}return console.log("Downloading routes from server..."),r=v+"routes/",t.next=25,fetch(r);case 25:return o=t.sent,t.next=28,o.text();case 28:P=t.sent,g=JSON.parse(P),void 0!==g&&null!=g&&(localStorage.allRoutesJSON=P),x=!0,console.log("Routes loaded from server."),t.next=38;break;case 35:g=JSON.parse(localStorage.allRoutesJSON),x=!0,console.log("Routes loaded from localStorage.");case 38:if(S){t.next=57;break}if(void 0!==localStorage.allTimetablesJSON&&null!=localStorage.allTimetablesJSON){t.next=54;break}return console.log("Downloading timetables from server..."),i=v+"timetables/",t.next=44,fetch(i);case 44:return a=t.sent,t.next=47,a.text();case 47:O=t.sent,y=JSON.parse(O),void 0!==y&&null!=y&&(localStorage.allTimetablesJSON=O),S=!0,console.log("Timetables loaded from server."),t.next=57;break;case 54:y=JSON.parse(localStorage.allTimetablesJSON),S=!0,console.log("Timetables loaded from localStorage.");case 57:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),c=function(){var t=i(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w){t.next=5;break}return w=!0,t.next=4,l();case 4:b&&x&&S&&(0,h.default)(m,g,y);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),f=n(8),h=r(f),d=n(3),p=r(d),v=p.default.apiPublicTransportServer,m=null,g=null,y=null,w=!1,b=!1,x=!1,S=!1,T=null,P=null,O=null,k=function(){function t(){o(this,t)}return s(t,null,[{key:"getAllStations",value:function(){return m}},{key:"getAllRoutes",value:function(){return g}},{key:"getAllTimetables",value:function(){return y}},{key:"getAllStationsJSON",value:function(){return T}},{key:"getAllRoutesJSON",value:function(){return P}},{key:"getAllTimetablesJSON",value:function(){return O}},{key:"loadDataAndInitialize",value:function(){function t(){return e.apply(this,arguments)}var e=i(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"loadDataOnly",value:function(){function t(){return e.apply(this,arguments)}var e=i(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:case"end":return t.stop()}},t,this)}));return t}()}]),t}();e.default=k},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):m=-1,p.length&&u())}function u(){if(!v){var t=o(a);v=!0;for(var e=p.length;e;){for(d=p,p=[];++m<e;)d&&d[m].run();m=-1,e=p.length}d=null,v=!1,i(t)}}function s(t,e){this.fun=t,this.array=e}function l(){}var c,f,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,p=[],v=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new s(t,e)),1!==p.length||v||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){if(void 0!==t&&null!=t){var e=t.split(","),n=parseFloat(e[0]),r=parseFloat(e[1]);return n>=-90&&n<=90&&r>=-180&&r<=180?{lat:n,lng:r}:void 0}}function u(t){if(void 0!==t&&null!=t){var e=t.split(":"),n=parseInt(e[0],10),r=parseInt(e[1],10);return n>=0&&n<24&&r>=0&&r<60?3600*n+60*r:void 0}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),l=r(s),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(){var t=o(l.default.mark(function t(e){var n;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=o(l.default.mark(function t(e,n,r,o,i,a){var u,s;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="?from="+e+"&to="+n+"&startTime="+r+"&dopTimeMinutes="+o+"&goingSpeed="+i+"&transportTypes="+a,t.next=3,f(S+"optimalRoute"+u);case 3:return s=t.sent,T.findedOptimalWays=s,console.log("Finded "+T.findedOptimalWays.length+" optimal routes."),t.abrupt("return",s);case 7:case"end":return t.stop()}},t,this)}));return function(e,n,r,o,i,a){return t.apply(this,arguments)}}(),d=function(){var t=o(l.default.mark(function t(e,n,r,o,i,s){var c,f,h,d,p,m;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Start local counting..."),t.next=3,g.default.loadDataAndInitialize();case 3:if(c=a(e),f=a(n),h=u(r),void 0!==c&&void 0!==f&&void 0!==h){t.next=8;break}return t.abrupt("return",null);case 8:return d=null,void 0!==s&&(d=s.split(",")),void 0!==d&&null!=d||(d=["bus","trolleybus"]),p=Date.now(),m=new v.default(c,f,h,d,parseFloat(i),parseFloat(o)),T.findedOptimalWays=m.getOptimalWays(),console.log("Finded "+T.findedOptimalWays.length+" optimal routes. Time = "+(Date.now()-p)+" ms."),t.abrupt("return",T.findedOptimalWays);case 16:case"end":return t.stop()}},t,this)}));return function(e,n,r,o,i,a){return t.apply(this,arguments)}}(),p=n(10),v=r(p),m=n(4),g=r(m),y=n(3),w=r(y),b=n(7),x=r(b),S=w.default.apiPublicTransportServer;void 0===navigator.onLine||navigator.onLine===!1?g.default.loadDataAndInitialize():g.default.loadDataOnly();var T=function(){function t(){i(this,t)}return c(t,null,[{key:"findWays",value:function(){function e(t,e,r,o,i,a){return n.apply(this,arguments)}var n=o(l.default.mark(function e(n,r,o,i,a,u){var s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,e.prev=1,e.next=4,h(n,r,o,i,a,u);case 4:s=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,d(n,r,o,i,a,u);case 11:s=e.sent;case 12:if(e.prev=12,null!=s&&0!==s.length){for(t.findedOptimalWays=s,t.minimalTimeSeconds=parseFloat(t.findedOptimalWays[0].totalTimeSeconds),t.minimalGoingTimeSeconds=parseFloat(t.findedOptimalWays[0].totalGoingTimeSeconds),t.minimalTransportChangingCount=parseFloat(t.findedOptimalWays[0].totalTransportChangingCount),c=1;c<t.findedOptimalWays.length;c++)parseFloat(t.findedOptimalWays[c].totalTimeSeconds)<t.minimalTimeSeconds&&(t.minimalTimeSeconds=parseFloat(t.findedOptimalWays[c].totalTimeSeconds)),parseFloat(t.findedOptimalWays[c].totalGoingTimeSeconds)<t.minimalGoingTimeSeconds&&(t.minimalGoingTimeSeconds=parseFloat(t.findedOptimalWays[c].totalGoingTimeSeconds)),parseFloat(t.findedOptimalWays[c].totalTransportChangingCount)<t.minimalTransportChangingCount&&(t.minimalTransportChangingCount=parseFloat(t.findedOptimalWays[c].totalTransportChangingCount));t.minimalTransportChangingCount<1&&(t.minimalTransportChangingCount=1)}return e.abrupt("return",s);case 16:case"end":return e.stop()}},e,this,[[1,7,12,16]])}));return e}()},{key:"customizeFindedOptimalWaysStart",value:function(e,n,r){if(null!=t.findedOptimalWays){for(var o=[],i=[],a=0,u=0,s=-1,l=0;l<t.findedOptimalWays.length;l++){u=0,s=-1;for(var c=0;c<t.findedOptimalWays.length;c++)if(o.indexOf(c)===-1){a=0===parseFloat(t.findedOptimalWays[c].totalTransportChangingCount)?1:t.minimalTransportChangingCount/parseFloat(t.findedOptimalWays[c].totalTransportChangingCount);var f=t.minimalTimeSeconds/parseFloat(t.findedOptimalWays[c].totalTimeSeconds)*e+t.minimalGoingTimeSeconds/parseFloat(t.findedOptimalWays[c].totalGoingTimeSeconds)*n+a*r;f>=u&&(u=f,s=c)}s!==-1&&o.push(s)}for(var h=0,d=o.length,p=o[0];h<d;p=o[++h])i.push(t.findedOptimalWays[p]);return t.findedOptimalWays=i,t.findedOptimalWays}throw new Error("Can`t customize optimal ways, because it`s not finded yet.")}},{key:"findCurrentDestinationCoords",value:function(){function e(){return n.apply(this,arguments)}var n=o(l.default.mark(function e(){var n,r,i,a,u,s,c,f;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=22;break}return n=function(){var t=o(l.default.mark(function t(){var e;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Promise(function(t,e){navigator.geolocation.getCurrentPosition(t,e)}),t.next=3,e;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.next=4,n();case 4:if(r=e.sent,void 0!==r&&null!=r){e.next=7;break}return e.abrupt("return",null);case 7:return i=parseFloat(r.coords.latitude.toFixed(4)),a=parseFloat(r.coords.longitude.toFixed(4)),localStorage.lastCnownPositionCoords=i+","+a,u={lat:i,lng:a},e.next=13,t.getDesinationDescription(u);case 13:if(s=e.sent,null!=s){e.next=19;break}return e.next=17,x.default.tryFindByCoords(u);case 17:c=e.sent,s=null!=c?c.description:"["+i+", "+a+"]";case 19:return localStorage.lastCnownPositionCoordsDescription=s,f={lat:i,lng:a},e.abrupt("return",f);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"findPointsByOsmGeocodingApi",value:function(){function t(t){return e.apply(this,arguments)}var e=o(l.default.mark(function t(e){var n,r,o,i,a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("https://nominatim.openstreetmap.org/search?q="+e+"&format=json");case 3:if(n=t.sent,null==n||0===n.length){t.next=9;break}for(r=[],o=0,i=n.length,a=n[0];o<i;a=n[++o])r.push({coords:{lat:parseFloat(a.lat),lng:parseFloat(a.lon)},description:a.display_name});return x.default.tryPush(r[0]),t.abrupt("return",r);case 9:return t.abrupt("return",null);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",null);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return t}()},{key:"getDesinationDescription",value:function(){function e(t){return n.apply(this,arguments)}var n=o(l.default.mark(function e(n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.findPointsByOsmGeocodingApi(n.lat+","+n.lng);case 3:if(r=e.sent,null==r){e.next=6;break}return e.abrupt("return",r[0].description);case 6:return e.abrupt("return",null);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return e}()}]),t}();T.startOptimalRoutePoint=null,T.finalOptimalRoutePoint=null,T.myCurrentFindedPosition=null,T.findedOptimalWays=null,T.minimalTimeSeconds=0,T.minimalGoingTimeSeconds=0,T.minimalTransportChangingCount=0,T.fromPosition=null,T.toPosition=null,T.myStartTime=0,T.types=["bus","trolleybus"],T.my_speed=5,T.my_dopTimeMinutes=2,e.default=T},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=r(a),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){var t=i(u.default.mark(function t(){var e;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Promise(function(t,e){var n=indexedDB.open(v,1);n.onerror=function(t){e(t.target.error)},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(){var e=i(u.default.mark(function e(n){var r,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.result,o=r.createObjectStore(m,{keyPath:"key",autoIncrement:!0}),o.createIndex("description","description",{unique:!0}),o.createIndex("lat","lat",{unique:!1}),o.createIndex("lng","lng",{unique:!1}),e.next=7,l();case 7:i=e.sent,t(i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),t.next=3,e;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),c=function(){var t=i(u.default.mark(function t(){var e;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Promise(function(){var t=i(u.default.mark(function t(e,n){var r,o,i,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,l();case 3:o=t.sent,i=o.transaction([m]),a=i.objectStore(m),s=a.openCursor(),s.onsuccess=function(t){var n=t.target.result;n?(r.push(n.value),n.continue()):e(r)},s.onerror=function(t){n(t.target.error)};case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),t.next=3,e;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),f=function(){var t=i(u.default.mark(function t(e){var n,r,o,i,a,s,l;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:for(n=t.sent,r=null,o=0,i=n.length,a=n[0],s=150;o<i;a=n[++o])l=p.default.distance(e,{lat:a.lat,lng:a.lng}),l<s&&(s=l,r=a);return t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=i(u.default.mark(function t(e){var n,r,o,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:n=t.sent,r=0,o=n.length,a=n[0];case 4:if(!(r<o)){t.next=10;break}if(!(p.default.distance(e.coords,{lat:a.lat,lng:a.lng})<50)){t.next=7;break}return t.abrupt("return",null);case 7:a=n[++r],t.next=4;break;case 10:return s=new Promise(function(){var t=i(u.default.mark(function t(n,r){var o,i,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:o=t.sent,i=o.transaction([m],"readwrite"),a=i.objectStore(m),s=a.add({lat:e.coords.lat,lng:e.coords.lng,description:e.description}),s.onerror=function(t){r(t.target.error)},s.onsuccess=function(t){n(t.target.result)};case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),t.next=13,s;case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),d=n(2),p=r(d),v="public_transport",m="points_history",g=function(){function t(){o(this,t)}return s(t,null,[{key:"getAllPoints",value:function(){function t(){return e.apply(this,arguments)}var e=i(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"tryPush",value:function(){function t(t){return e.apply(this,arguments)}var e=i(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"tryFindByCoords",value:function(){function t(t){return e.apply(this,arguments)}var e=i(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return t}()}]),t}();e.default=g},function(t,e){"use strict";function n(t){for(var e=0;e<=1;e++)for(var n=0,r=this.stations[e].length;n<r;n++)if(this.stations[e][n]===t)return n+1!==r?this.stations[e][n+1]:null;return null}function r(t){for(var e=0;e<=1;e++)for(var n=0,r=this.stations[e].length;n<r;n++)if(this.stations[e][n]===t)return n!==r?this.stations[e][n-1]:null;return null}function o(t){for(var e=0;e<=1;e++)for(var n=0,r=this.stations[e].length;n<r;n++)if(this.stations[e][n]===t)return this.timetables[e][n];return null}function i(t){var e=new Date;e.setMinutes(0),e.setHours(0),e.setSeconds(t);for(var n=e.getDay(),r=0,o=this.table.length,i=this.table[0];r<o;i=this.table[++r])if(i.days.includes(n)){for(var a,u=0,s=i.times.length,l=i.times[0];u<s;l=i.times[++u])if(a=3600*l.hour+60*l.minute,a>=t)return a-t;if(0!==i.times.length)return 3600*i.times[0].hour+60*i.times[0].minute-t+86400;break}return 216e7}function a(t){var e=new Date;e.setMinutes(0),e.setHours(0),e.setSeconds(t);for(var n,r=e.getDay(),o=0,i=this.table.length,a=this.table[0],u=!1;o<i;a=this.table[++o])if(a.days.includes(r)){u=!1,n=null;for(var s=0,l=a.times.length,c=a.times[0];s<l&&3600*c.hour+60*c.minute<=t;c=a.times[++s])u=!0,n=c;if(u)return 3600*n.hour+60*n.minute-t;if(0!==a.times.length)return 3600*a.times[0].hour+60*a.times[0].minute-t-86400;break}return 0}function u(t,e,u){function s(t,e,n,r){null==t.routes&&(t.routes=[]),t.routes.includes(r)||t.routes.push(r),e.push(t);var o=u.find(function(e,n,o){return e.stationCode===t.hashcode&&e.routeCode===r.hashcode}),i=null==o?null:o;n.push(i)}console.log("Start initializing...");for(var l=Date.now(),c=[],f=0,h=t.length,d=t[0];f<h;d=t[f])null==d.routesCodes||0===d.routesCodes.length?(t.splice(f,1),h=t.length):f++;for(var p=0,v=e.length,m=e[0];p<v;m=e[++p])if(m.getNextStation=n,m.getPreviousStation=r,m.getTimetable=o,null!=m.stationsCodes&&0!==m.stationsCodes.length)try{m.stations=[[],[]],m.timetables=[[],[]];for(var g=0,y=[],w=[];g<=1;g++){var b=m.stationsCodes;if(null!=b[g]&&0!==b[g].length){for(var x=0,S=b[g].length,T=b[g][0];x<S;T=b[g][++x]){for(var P=!1,O=0,k=t.length,C=t[0];O<k;C=t[++O])if(null!=C&&C.hashcode===T){s(C,y,w,m),P=!0;break}if(!P)for(var _=0,W=t.length,j=t[0];_<W;j=t[++_])if(null!=j&&j.hashcode===T){s(j,y,w,m),c.includes(j)||c.push(j);break}}m.stations[g]=y,m.timetables[g]=w}}}catch(t){console.log(t);continue}for(var R=0,E=u.length,N=u[0];R<E;N=u[++R])N.findTimeAfter=i,N.findTimeBefore=a;console.log("Initialized. Time = "+(Date.now()-l)+" ms.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){null==p&&(p=h.default.getAllStations());for(var n=[],r=0,o=p.length,i=p[0];r<o;i=p[++r])null!=i&&d(i.coords,t)<e&&n.push(i);return n}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(13),s=r(u),l=n(2),c=r(l),f=n(4),h=r(f),d=c.default.distance,p=null,v=function(){function t(e,n,r,a,u,l,c,f){o(this,t),null!=c?this.ignoringRoutes=c:this.ignoringRoutes=[],this.points=[],this.needPos=n,this.nowPos=e,this.goingSpeed=u,this.time=r;var h=60*l;this.types=a,this.myIgnoringFragments=null;var p=new s.default(e,n),v=i(p.startPoint.coords,d(p.startPoint.coords,p.finalPoint.coords));p.fillStartData(v,u,h,this.myIgnoringFragments),p.countShortWay(this.ignoringRoutes,this.myIgnoringFragments,r,a,u,h);var m=p.finalPoint;for(this.points.push(m.toString());null!=m.previousPoint;)if(m=m.previousPoint,this.points.push(m.toString()),null==m.previousPoint&&m.coords!==p.startPoint.coords)throw new Error("Где-то удалилась часть маршрута...");this.totalTimeSeconds=p.finalPoint.totalTimeSeconds,this.totalGoingTime=p.finalPoint.getTotalGoingTime(),this.totalTransportChangingCount=p.finalPoint.getTotalTransportChangingCount(),this.myPoints=p,this.isVisited=!1}return a(t,[{key:"setVisited",value:function(){this.isVisited=!0}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(9),s=r(u),l=n(11),c=r(l),f=function(t){function e(t,n,r,a,u,l){o(this,e);var f=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));f.getOptimalWays=function(){for(var t=[],e=0,n=this.length,r=this[0];e<n;r=this[++e])t.push(new c.default(r));return t},f.selectOptimalRouteWithMinimalMark=function(){for(var t=null,e=0,n=this.length,r=this[0];e<n;r=this[++e])if(!r.isVisited){for(t=r,r=this[++e];e<n;r=this[++e])!r.isVisited&&r.totalTimeSeconds<t.totalTimeSeconds&&(t=r);return t}return null},f.push(new s.default(t,n,r,a,u,l));for(var h=[],d=f[0];null!=d;d.setVisited(),d=f.selectOptimalRouteWithMinimalMark()){var p=.25;h=[];for(var v=d.myPoints.finalPoint;null!=v.previousPoint;v=v.previousPoint)null==v.fromWhichRoute||h.includes(v.fromWhichRoute)||h.push(v.fromWhichRoute);for(var m=0,g=h.length,y=h[0];m<g;y=h[++m])if(!d.ignoringRoutes.includes(y)){var w=[];w=w.concat(d.ignoringRoutes),w.push(y);var b=new s.default(t,n,r,a,u,l,w);if(b.totalTimeSeconds<=f[0].totalTimeSeconds/p){for(var x=JSON.stringify(b.points),S=!1,T=0,P=f.length,O=f[0];T<P;O=f[++T])if(JSON.stringify(O.points)===x){S=!0;break}if(S)continue;f.push(b)}}}return f}return a(e,t),e}(Array);e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),a=r(i),u=function t(e){o(this,t),this.totalTimeSeconds=e.totalTimeSeconds,this.totalGoingTimeSeconds=e.totalGoingTime,this.totalTransportChangingCount=e.totalTransportChangingCount,this.points=[];for(var n=e.myPoints.finalPoint;null!=n;n=n.previousPoint)this.points.push(new a.default(n.totalTimeSeconds,n.station,n.fromWhichRoute,n.coords));this.points.reverse()};e.default=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,r,o,i){n(this,t),void 0!==r.hashcode?(this.station=r,this.stationCode=r.hashcode,r.point=this,this.coords=r.coords):(this.coords=r,this.station=null,this.stationCode=null),this.totalTimeSeconds=e,this.fromWhichStation=o,this.fromWhichRoute=i,this.isVisited=!1,this.previousPoint=null}return r(t,[{key:"tryUpdate",value:function(t,e,n,r){return t<this.totalTimeSeconds&&(this.fromWhichRoute=r,this.previousPoint=e,this.totalTimeSeconds=t,this.fromWhichStation=n,!0)}},{key:"setVisited",value:function(){this.isVisited=!0}},{key:"toString",value:function(){var t,e;return t=null!=this.station?this.station.name:"null",e=null!=this.fromWhichRoute?this.fromWhichRoute.type+" "+this.fromWhichRoute.number+" "+this.fromWhichRoute.from+" - "+this.fromWhichRoute.to:"пешком","("+this.totalTimeSeconds+") "+t+" ("+e+")"}},{key:"getTotalGoingTime",value:function(){for(var t=0,e=this;null!=e.previousPoint;)null==e.fromWhichRoute&&(t+=e.totalTimeSeconds-e.previousPoint.totalTimeSeconds),e=e.previousPoint;return t}},{key:"getTotalTransportChangingCount",value:function(){for(var t=0,e=this;null!=e.previousPoint;)null!=e.fromWhichRoute&&null!=e.fromWhichRoute.hashcode&&e.fromWhichRoute!==e.previousPoint.fromWhichRoute&&t++,e=e.previousPoint;return t}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return Math.floor(t/(e/3.6))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(12),s=r(u),l=n(2),c=r(l),f=c.default.distance,h={table:1,periodic:2},d=function(){function t(e,n){o(this,t),this.collection=[],this.startPoint=new s.default(0,e,null,null),this.finalPoint=new s.default(216e7,n,null,null),this.currentSelectedPoint=null}return a(t,[{key:"findElement",value:function(t){if(null!=t.hashcode){if(null!=t.point)return t.point;var e=new s.default(216e7,t,null,null);return this.collection.push(e),e}for(var n=0,r=this.collection.length,o=this.collection[0];n<r;o=this.collection[++n])if(o.coords===t.coords&&o.stationCode===t.stationCode)return o;return null}},{key:"fillStartData",value:function(t,e,n,r){this.finalPoint.tryUpdate(i(f(this.startPoint.coords,this.finalPoint.coords),e)+1200,this.startPoint,null,null);for(var o=0,a=t.length,u=t[0];o<a;u=t[++o])if(null==r||!r.contains(u.hashcode,null,null)){var l=new s.default(216e7,u,null,null);l.tryUpdate(i(f(this.startPoint.coords,u.coords),e)+n,this.startPoint,null,null),this.collection.push(l)}}},{key:"getNextUnvisitedPoint",value:function(){return null!=this.currentSelectedPoint&&this.currentSelectedPoint.setVisited(),this.currentSelectedPoint=this.selectPointWithMinimalMark(),this.currentSelectedPoint}},{key:"selectPointWithMinimalMark",value:function(){for(var t=null,e=0,n=this.collection.length,r=this.collection[0];e<n;r=this.collection[++e])if(!r.isVisited){for(t=r,r=this.collection[++e];e<n;r=this.collection[++e])!r.isVisited&&r.totalTimeSeconds<t.totalTimeSeconds&&(t=r);return t}return null}},{key:"countShortWay",value:function(t,e,n,r,o,a){for(var u,s,l,c,d,p,v,m=this.getNextUnvisitedPoint();null!=m&&(s=m.totalTimeSeconds,!(s>this.finalPoint.totalTimeSeconds));m=this.getNextUnvisitedPoint()){if(u=m.station,l=u.hashcode,c=m.fromWhichRoute,null!=u){if(d=n+s,p=null,null==u.routes)continue;p=u.routes;for(var g,y=0,w=p.length,b=p[0];y<w;b=p[++y])if((null==t||!t.includes(b))&&r.includes(b.type)&&(g=b.getNextStation(u),null!=g)){var x=b.getTimetable(u);if(null!=e&&e.contains(g.hashcode,b.hashcode,l))continue;if(x.type===h.table){var S=d;null!=c&&c!==b&&(S+=a);var T=x.findTimeAfter(S),P=S+T,O=b.getTimetable(g),k=O.findTimeAfter(P),C=P-d+k+s;this.findElement(g).tryUpdate(C,m,u,b)}else if(x.type===h.periodic)throw new Error}}if(v=m.coords,null!=c){for(var _,W,j,R=0,E=this.collection.length,N=this.collection[0];R<E;N=this.collection[++R])if(!N.isVisited&&N!==m){if(null!=e&&e.contains(N.stationCode,null,l))continue;_=f(v,N.coords),W=i(_,o),j=s+W+a,N.tryUpdate(j,m,u,null)}if(null==e||!e.contains(null,null,l)){var F=s+i(f(v,this.finalPoint.coords),o);this.finalPoint.tryUpdate(F,m,u,null)}}}for(var M=this.finalPoint.previousPoint;M!==this.startPoint;){var L=M.fromWhichRoute;if(null!=L){var D=M.previousPoint;if(D!==this.startPoint&&D.fromWhichRoute!==L){var G=L.getPreviousStation(D.station);if(null!=G){var J=G.point;if(null!=J&&J.isVisited){var A=L.getTimetable(G);null!=A&&J.totalTimeSeconds<=D.totalTimeSeconds&&(D.fromWhichRoute=L,
D.previousPoint=J)}}}}M=M.previousPoint}}}]),t}();e.default=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e,r,o,i){n(this,t),this.time=e,this.station=null==r?null:{hashcode:r.hashcode,name:r.name,routes:null,Coords:{lat:r.coords.lat,lng:r.coords.lng}},this.route=null==o?null:{vehicles:[],gpsTrack:null,hashcode:o.hashcode,number:o.number,type:o.type,from:o.from,to:o.to,owner:"",stations:null,timetables:null,stationsJSON:null},this.coords=i};e.default=r},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(16),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),u=new p(r||[]);return a._invoke=c(t,n,u),a}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function a(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(n,r,i,a){var u=o(t[n],t,r);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&w.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(l).then(function(t){s.value=t,i(s)},a)}a(u.arg)}function r(t,n){function r(){return new Promise(function(r,o){e(t,n,r,o)})}return i=i?i.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var i;this._invoke=r}function c(t,e,n){var r=k;return function(i,a){if(r===_)throw new Error("Generator is already running");if(r===W){if("throw"===i)throw a;return m()}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=f(u,n);if(s){if(s===j)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===k)throw r=W,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=_;var l=o(t,e,n);if("normal"===l.type){if(r=n.done?W:C,l.arg===j)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=W,n.method="throw",n.arg=l.arg)}}}function f(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,f(t,e),"throw"===e.method))return j;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var r=o(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,j;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,j):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,j)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(w.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:g,done:!0}}var g,y=Object.prototype,w=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",S=b.asyncIterator||"@@asyncIterator",T=b.toStringTag||"@@toStringTag",P="object"==typeof t,O=e.regeneratorRuntime;if(O)return void(P&&(t.exports=O));O=e.regeneratorRuntime=P?t.exports:{},O.wrap=r;var k="suspendedStart",C="suspendedYield",_="executing",W="completed",j={},R={};R[x]=function(){return this};var E=Object.getPrototypeOf,N=E&&E(E(v([])));N&&N!==y&&w.call(N,x)&&(R=N);var F=u.prototype=i.prototype=Object.create(R);a.prototype=F.constructor=u,u.constructor=a,u[T]=a.displayName="GeneratorFunction",O.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},O.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T in t||(t[T]="GeneratorFunction")),t.prototype=Object.create(F),t},O.awrap=function(t){return{__await:t}},s(l.prototype),l.prototype[S]=function(){return this},O.AsyncIterator=l,O.async=function(t,e,n,o){var i=new l(r(t,e,n,o));return O.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},s(F),F[T]="Generator",F.toString=function(){return"[object Generator]"},O.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},O.values=v,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&w.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=w.call(o,"catchLoc"),u=w.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&w.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,j):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),j},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),j}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),j}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(5))}]);
//# sourceMappingURL=sw.js.map